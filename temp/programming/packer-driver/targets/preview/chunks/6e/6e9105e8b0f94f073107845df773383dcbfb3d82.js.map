{"version":3,"sources":["file:///F:/git/TestMatch3/assets/Scripts/Session/GameSaveListener.ts"],"names":["GameSaveListener","constructor","_saveDisp","_logic","_device","_state","AddHandler","OnExitApplication","Save","RemoveHandler","WillSave","gameState","OnPauseApplication","ManualSave","OnResumeApplication"],"mappings":";;;8BAMaA,gB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAAAA,gB,GAAN,MAAMA,gBAAN,CACP;AACIC,QAAAA,WAAW,CACCC,SADD,EAECC,MAFD,EAGCC,OAHD,EAICC,MAJD,EAKT;AAAA,eAJUH,SAIV,GAJUA,SAIV;AAAA,eAHUC,MAGV,GAHUA,MAGV;AAAA,eAFUC,OAEV,GAFUA,OAEV;AAAA,eADUC,MACV,GADUA,MACV;;AACEH,UAAAA,SAAS,CAACI,UAAV,CAAqB,IAArB;;AACAF,UAAAA,OAAO,CAACE,UAAR,CAAmB,IAAnB;AACH;;AAEDC,QAAAA,iBAAiB,GAAS;AACtB,eAAKL,SAAL,CAAeM,IAAf;AACH;;AAEDC,QAAAA,aAAa,GAAE;AACX,eAAKP,SAAL,CAAeO,aAAf,CAA6B,IAA7B;;AACA,eAAKL,OAAL,CAAaK,aAAb,CAA2B,IAA3B;AACH;;AAEDC,QAAAA,QAAQ,GAAS;AACb,eAAKP,MAAL,CAAYO,QAAZ,CAAqB,KAAKL,MAAL,CAAYM,SAAjC;AACH;;AAEDC,QAAAA,kBAAkB,GAAS;AACvB,eAAKV,SAAL,CAAeM,IAAf;AACH;;AAEDK,QAAAA,UAAU,GAAG;AACT,eAAKX,SAAL,CAAeM,IAAf;AACH;;AAEDM,QAAAA,mBAAmB,GAAS,CAAE;;AAhClC,O","sourcesContent":["import { AppDevice, IApplicationHandler } from \"../Application/AppDevice\";\r\nimport { GameLogic } from \"./GameLogic\";\r\nimport { SaveDispatcher } from \"../Save/SaveDispatcher\";\r\nimport { ISaveListener } from \"../Save/SaveInterfaces\";\r\nimport { ApplicationState } from \"../Save/State\";\r\n\r\nexport class GameSaveListener implements ISaveListener, IApplicationHandler\r\n{\r\n    constructor(\r\n        private _saveDisp:SaveDispatcher,\r\n        private _logic:GameLogic,\r\n        private _device:AppDevice,\r\n        private _state:ApplicationState\r\n    ) {\r\n        _saveDisp.AddHandler(this)\r\n        _device.AddHandler(this)\r\n    }\r\n\r\n    OnExitApplication(): void {\r\n        this._saveDisp.Save()\r\n    }\r\n\r\n    RemoveHandler(){\r\n        this._saveDisp.RemoveHandler(this)\r\n        this._device.RemoveHandler(this)\r\n    }\r\n    \r\n    WillSave(): void {\r\n        this._logic.WillSave(this._state.gameState!)\r\n    }\r\n\r\n    OnPauseApplication(): void { \r\n        this._saveDisp.Save() \r\n    }\r\n    \r\n    ManualSave() {\r\n        this._saveDisp.Save()\r\n    }\r\n\r\n    OnResumeApplication(): void {}\r\n}"]}