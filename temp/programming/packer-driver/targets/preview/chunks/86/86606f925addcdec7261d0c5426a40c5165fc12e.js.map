{"version":3,"sources":["file:///F:/git/TestMatch3/assets/Scripts/GameManagerComponent.ts"],"names":["_decorator","Component","director","sys","ScenePoolManagerComponent","LocationType","AppRoot","Platform","AudioManagerComponent","OfflineTimer","ccclass","uniquelyReferenced","GameManagerComponent","_scene","_soundManager","onLoad","addPersistRootNode","node","scene","getComponent","timer","getInstance","Init","os","OS","IOS","Ios","ANDROID","Android","Editor","AddLocation","LoadingScene","StartScene","GameScene","ScoreScene"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,G,OAAAA,G;;AAEjCC,MAAAA,yB,iBAAAA,yB;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,qB,iBAAAA,qB;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAkCX,U;;sCAI3BY,oB,WAFZF,OAAO,CAAC,sBAAD,C,gBACPC,kB,UADD,MAEaC,oBAFb,SAE0CX,SAF1C,CAGA;AAAA;AAAA;AAAA,eACYY,MADZ;AAAA,eAEYC,aAFZ;AAAA;;AAIcC,QAAAA,MAAM,GAAS;AACrBb,UAAAA,QAAQ,CAACc,kBAAT,CAA4B,KAAKC,IAAjC;AAEA,cAAIC,KAAK,GAAG,KAAKC,YAAL;AAAA;AAAA,qEAAZ;AACA,eAAKN,MAAL,GAAcK,KAAd;AACA,eAAKJ,aAAL,GAAqB,KAAKK,YAAL;AAAA;AAAA,6DAArB;AACA,cAAMC,KAAK,GAAG,KAAKH,IAAL,CAAUE,YAAV;AAAA;AAAA,2CAAd;AAEA;AAAA;AAAA,kCAAQE,WAAR,CAAoBC,IAApB,CACInB,GAAG,CAACoB,EAAJ,IAAUpB,GAAG,CAACqB,EAAJ,CAAOC,GAAjB,GAAuB;AAAA;AAAA,oCAASC,GAAhC,GAAsCvB,GAAG,CAACoB,EAAJ,IAAUpB,GAAG,CAACqB,EAAJ,CAAOG,OAAjB,GAA2B;AAAA;AAAA,oCAASC,OAApC,GAA8C;AAAA;AAAA,oCAASC,MADjG,EAEI,KAAKhB,MAFT,EAGI,KAAKC,aAHT,EAIIM,KAJJ;AAMA;AAAA;AAAA,kCAAQC,WAAR,CAAoBN,MAApB;AAEAG,UAAAA,KAAK,CAACY,WAAN,CAAkB;AAAA;AAAA,4CAAaC,YAA/B,EAAmD,sBAAnD,EAA2E,CAA3E;AACAb,UAAAA,KAAK,CAACY,WAAN,CAAkB;AAAA;AAAA,4CAAaE,UAA/B,EAAmD,oBAAnD,EAA2E,CAA3E;AACAd,UAAAA,KAAK,CAACY,WAAN,CAAkB;AAAA;AAAA,4CAAaG,SAA/B,EAAmD,mBAAnD,EAA2E,CAA3E;AACAf,UAAAA,KAAK,CAACY,WAAN,CAAkB;AAAA;AAAA,4CAAaI,UAA/B,EAAmD,oBAAnD,EAA2E,CAA3E;AACH;;AAxBL,O","sourcesContent":["import { _decorator, Component, director, sys } from 'cc';\r\nimport { ISceneManager } from './Scene/ISceneManager';\r\nimport { ScenePoolManagerComponent } from './Scene/ScenePoolManagerComponent';\r\nimport { LocationType } from './Enums/LocationType';\r\nimport { AppRoot } from './Application/AppRoot';\r\nimport { Platform } from './Application/ApplicationConfig';\r\nimport { AudioManagerComponent } from './Scene/AudioManagerComponent';\r\nimport { OfflineTimer } from './Application/Timers';\r\n\r\nconst { ccclass, uniquelyReferenced } = _decorator;\r\n\r\n@ccclass('GameManagerComponent')\r\n@uniquelyReferenced\r\nexport class GameManagerComponent extends Component \r\n{   \r\n    private _scene!:ISceneManager\r\n    private _soundManager!:AudioManagerComponent\r\n\r\n    protected onLoad(): void {\r\n        director.addPersistRootNode(this.node);\r\n          \r\n        let scene = this.getComponent(ScenePoolManagerComponent)!;\r\n        this._scene = scene\r\n        this._soundManager = this.getComponent(AudioManagerComponent)!;\r\n        const timer = this.node.getComponent(OfflineTimer)!;\r\n\r\n        AppRoot.getInstance.Init(\r\n            sys.os == sys.OS.IOS ? Platform.Ios : sys.os == sys.OS.ANDROID ? Platform.Android : Platform.Editor,\r\n            this._scene,\r\n            this._soundManager,\r\n            timer\r\n        )\r\n        AppRoot.getInstance.onLoad()\r\n\r\n        scene.AddLocation(LocationType.LoadingScene       ,\"Prefabs/LoadingScene\" ,0 )\r\n        scene.AddLocation(LocationType.StartScene         ,\"Prefabs/StartScene\"   ,0 )\r\n        scene.AddLocation(LocationType.GameScene          ,\"Prefabs/GameScene\"    ,1 )\r\n        scene.AddLocation(LocationType.ScoreScene         ,\"Prefabs/ScoreScene\"   ,2 )\r\n    }\r\n}\r\n\r\n"]}