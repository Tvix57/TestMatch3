{"version":3,"sources":["file:///F:/git/TestMatch3/assets/Scripts/Scene/LoadingScene/LoadingSceneComponent.ts"],"names":["_decorator","Component","ProgressBar","UITransform","ScenePoolManagerComponent","AppRoot","ccclass","property","LoadingSceneComponent","onEnable","getInstance","ResolveSceneManager","AddHandler","progress","totalLength","progressSize","width","onDisable","RemoveHandler","WillTransfer","loc","OnTransfer","Preload","OnLoadedScene","num","max"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,W,OAAAA,W;;AAE1CC,MAAAA,yB,iBAAAA,yB;;AAEAC,MAAAA,O,iBAAAA,O;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;uCAGjBQ,qB,WADZF,OAAO,CAAC,uBAAD,C,UAGHC,QAAQ,CAACL,WAAD,C,UAGRK,QAAQ,CAACJ,WAAD,C,2BANb,MACaK,qBADb,SAC2CP,SAD3C,CAEA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAOcQ,QAAAA,QAAQ,GAAS;AACvB;AAAA;AAAA,kCAAQC,WAAR,CAAoBC,mBAApB,GAA0CC,UAA1C,CAAqD,IAArD;AACA,eAAKC,QAAL,CAAcC,WAAd,GAA4B,KAAKC,YAAL,CAAkBC,KAA9C;AACH;;AACSC,QAAAA,SAAS,GAAS;AACxB;AAAA;AAAA,kCAAQP,WAAR,CAAoBC,mBAApB,GAA0CO,aAA1C,CAAwD,IAAxD;AACH;;AAEDC,QAAAA,YAAY,CAACC,GAAD,EAA0B,CAAG;;AAEzCC,QAAAA,UAAU,CAACD,GAAD,EAA0B;AAChC,cAAG;AAAA;AAAA,kCAAQV,WAAR,CAAoBC,mBAApB;AAAA;AAAA,qEAAH,EAAoF;AAAA;AAAA,kCAAQD,WAAR,CAAoBC,mBAApB,EAAD,CAAyEW,OAAzE;AACtF;;AAEDC,QAAAA,aAAa,CAAEC,GAAF,EAAeC,GAAf,EAAiC;AAC1C,eAAKZ,QAAL,CAAcA,QAAd,GAAyBW,GAAG,GAAGC,GAA/B;AACH;;AAvBL,O","sourcesContent":["import { _decorator, Component, Node, ProgressBar, UITransform } from 'cc';\r\nimport { ITransferHandler } from '../ISceneManager';\r\nimport { ScenePoolManagerComponent } from '../ScenePoolManagerComponent';\r\nimport { LocationType } from '../../Enums/LocationType';\r\nimport { AppRoot } from '../../Application/AppRoot';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LoadingSceneComponent')\r\nexport class LoadingSceneComponent extends Component implements ITransferHandler\r\n{\r\n    @property(ProgressBar)\r\n    progress!:ProgressBar\r\n\r\n    @property(UITransform)\r\n    progressSize!:UITransform\r\n\r\n    protected onEnable(): void {\r\n        AppRoot.getInstance.ResolveSceneManager().AddHandler(this)\r\n        this.progress.totalLength = this.progressSize.width\r\n    }\r\n    protected onDisable(): void {\r\n        AppRoot.getInstance.ResolveSceneManager().RemoveHandler(this)\r\n    }\r\n\r\n    WillTransfer(loc: LocationType): void { }\r\n\r\n    OnTransfer(loc: LocationType): void { \r\n        if(AppRoot.getInstance.ResolveSceneManager() instanceof ScenePoolManagerComponent) (AppRoot.getInstance.ResolveSceneManager() as ScenePoolManagerComponent).Preload()\r\n    }\r\n\r\n    OnLoadedScene?(num: number, max:number): void {\r\n        this.progress.progress = num / max\r\n    }\r\n}\r\n\r\n\r\n"]}