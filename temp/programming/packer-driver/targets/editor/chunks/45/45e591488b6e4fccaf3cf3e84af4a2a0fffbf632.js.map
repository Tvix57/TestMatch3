{"version":3,"sources":["file:///F:/git/TestMatch3/assets/Scripts/Session/GameLogic.ts"],"names":["GameLogic","Loop","GameStats","Field","constructor","library","timer","state","_loop","_field","_gameStats","field","gameStats","ResolveLibrary","ResolveLoop","ResolveField","ResolveGameStats","GetName","name","WillSave","currentState","GetTotal","Finish","RemoveAll"],"mappings":";;;sDAgBaA,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAPJC,MAAAA,I,iBAAAA,I;;AAGAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,K,iBAAAA,K;;;;;;AAbT;AACA;AACA;AACA;AACA;AACA;;;2BAWaH,S,GAAN,MAAMA,SAAN,CACP;AAMII,QAAAA,WAAW,CAASC,OAAT,EAA0BC,KAA1B,EAAmDC,KAAnD,EAAmE;AAAA,eALtEC,KAKsE;AAAA,eAJtEC,MAIsE;AAAA,eAHtEC,UAGsE;AAAA,eAA1DL,OAA0D,GAA1DA,OAA0D;AAAA,eAAhBE,KAAgB,GAAhBA,KAAgB;AAC1E,eAAKC,KAAL,GAAa;AAAA;AAAA,4BAASF,KAAT,CAAb;AACA,eAAKG,MAAL,GAAc;AAAA;AAAA,8BAAUF,KAAK,CAACI,KAAhB,CAAd;AACA,eAAKD,UAAL,GAAkB;AAAA;AAAA,sCAAcH,KAAK,CAACK,SAApB,CAAlB;AACH;;AAEDC,QAAAA,cAAc,GAAW;AAAE,iBAAO,KAAKR,OAAZ;AAAqB;;AAChDS,QAAAA,WAAW,GAAG;AAAE,iBAAO,KAAKN,KAAZ;AAAmB;;AACnCO,QAAAA,YAAY,GAAG;AAAE,iBAAO,KAAKN,MAAZ;AAAoB;;AACrCO,QAAAA,gBAAgB,GAAG;AAAE,iBAAO,KAAKN,UAAZ;AAAwB;;AAC7CO,QAAAA,OAAO,GAAU;AAAE,iBAAO,KAAKV,KAAL,CAAWI,KAAX,CAAiBO,IAAxB;AAA8B;;AAEjDC,QAAAA,QAAQ,CAACC,YAAD,EAAyB;AAC7BA,UAAAA,YAAY,CAACR,SAAb,GAAyB,KAAKF,UAAL,CAAgBW,QAAhB,EAAzB;AACH;;AACDC,QAAAA,MAAM,GAAE;AACJ,eAAKd,KAAL,CAAWe,SAAX;AACH;;AAvBL,O","sourcesContent":["/**\r\n * \r\n * GameLogic.ts\r\n * db://assets/Scripts/Game/GameLogic.ts\r\n *\r\n */\r\n\r\n\r\nimport { GameState } from \"./GameState\"\r\nimport { Loop } from \"./Loop\"\r\nimport { Library } from \"../Settings/Library\"\r\nimport { IAppTimer } from '../Application/IAppTimer'\r\nimport { GameStats } from \"../GameStats/GameStats\"\r\nimport { Field } from \"../Logic/Field\"\r\n\r\n\r\nexport class GameLogic\r\n{\r\n    private _loop:Loop\r\n    private _field: Field\r\n    private _gameStats:GameStats;\r\n\r\n\r\n    constructor(private library:Library, timer:IAppTimer, private state:GameState){\r\n        this._loop = new Loop(timer)\r\n        this._field = new Field(state.field)\r\n        this._gameStats = new GameStats(state.gameStats)\r\n    }\r\n    \r\n    ResolveLibrary():Library { return this.library }\r\n    ResolveLoop() { return this._loop }\r\n    ResolveField() { return this._field }\r\n    ResolveGameStats() { return this._gameStats }\r\n    GetName():string { return this.state.field.name }\r\n\r\n    WillSave(currentState:GameState) {\r\n        currentState.gameStats = this._gameStats.GetTotal();\r\n    }\r\n    Finish(){\r\n        this._loop.RemoveAll()\r\n    }\r\n}"]}