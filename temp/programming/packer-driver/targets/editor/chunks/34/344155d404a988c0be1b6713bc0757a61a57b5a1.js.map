{"version":3,"sources":["file:///F:/git/TestMatch3/assets/Scripts/Dialog/DialogFactory.ts"],"names":["DialogFactory","assert","AppRoot","PrefabLoader","AnsverDialogComponent","constructor","filename","_dialogManager","_filename","getInstance","ResolveDialogManager","CreateDialog","activate","Promise","resolve","reject","Create","then","dialogScene","itemDialog","getComponent","SetHandler","getChildByName","addChild","OpenDialog","catch","err"],"mappings":";;;qIAYaA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;AANEC,MAAAA,M,OAAAA,M;;AACNC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Y,iBAAAA,Y;;AAEAC,MAAAA,qB,iBAAAA,qB;;;;;;AAVT;AACA;AACA;AACA;AACA;AACA;;;;;+BAOaJ,a,GAAN,MAAMA,aAAN;AAAA;AAAA,wCAAyC;AAI5CK,QAAAA,WAAW,CAACC,QAAD,EAAmB;AAC1B,gBAAM,4BAAN;AAD0B,eAHtBC,cAGsB;AAAA,eAFtBC,SAEsB;AAE1B,eAAKA,SAAL,GAAiBF,QAAjB;AACA,eAAKC,cAAL,GAAsB;AAAA;AAAA,kCAAQE,WAAR,CAAoBC,oBAApB,EAAtB;AACH;;AAEDC,QAAAA,YAAY,CAACC,QAAD,EAAkD;AAC1D,iBAAO,IAAIC,OAAJ,CAAkB,CAACC,OAAD,EAASC,MAAT,KAAkB;AACvC,iBAAKC,MAAL,GAAcC,IAAd,CAAoBC,WAAD,IAAuB;AACtC,mBAAKF,MAAL,CAAY,KAAKR,SAAjB,EAA4BS,IAA5B,CAAkCE,UAAD,IAAsB;AAAA;;AACnDlB,gBAAAA,MAAM,CAACkB,UAAU,CAACC,YAAX;AAAA;AAAA,uEAAkD,IAAnD,EAAyD,wCAAzD,CAAN;AAEA,yCAAAD,UAAU,CAACC,YAAX;AAAA;AAAA,8GAAgDC,UAAhD,CAA2DT,QAA3D;AACA,yCAAAM,WAAW,CAACI,cAAZ,CAA2B,QAA3B,4CAAsCC,QAAtC,CAA+CJ,UAA/C;;AACA,qBAAKZ,cAAL,CAAoBiB,UAApB,CAA+BN,WAA/B;;AAEAJ,gBAAAA,OAAO,CAACK,UAAD,CAAP;AACH,eARD;AASH,aAVD,EAWCM,KAXD,CAWQC,GAAD,IAASX,MAAM,CAACW,GAAD,CAXtB;AAYH,WAbM,CAAP;AAcH;;AAzB2C,O","sourcesContent":["/**\r\n *\r\n * DialogFactory.ts\r\n * db://assets/Scripts/Scene/DialogFactory.ts\r\n *\r\n */\r\nimport { Node, assert } from \"cc\";\r\nimport { AppRoot } from \"../Application/AppRoot\";\r\nimport { PrefabLoader } from \"../Utils/PrefabLoader\";\r\nimport { IDialogManager } from './IDialogManager';\r\nimport { AnsverDialogComponent } from \"./AnsverDialogComponent\";\r\n\r\nexport class DialogFactory extends PrefabLoader {\r\n    private _dialogManager: IDialogManager;\r\n    private _filename: string;\r\n\r\n    constructor(filename: string) {\r\n        super(\"Prefabs/Dialog/DialogScene\");\r\n        this._filename = filename;\r\n        this._dialogManager = AppRoot.getInstance.ResolveDialogManager();\r\n    }\r\n\r\n    CreateDialog(activate?: (isOk: boolean) => void):Promise<Node>{\r\n        return new Promise<Node>((resolve,reject)=>{\r\n            this.Create().then((dialogScene: Node) => {\r\n                this.Create(this._filename).then((itemDialog: Node) => {\r\n                    assert(itemDialog.getComponent(AnsverDialogComponent) != null, \"Dialog must have AnsverDialogComponent\");\r\n\r\n                    itemDialog.getComponent(AnsverDialogComponent)?.SetHandler(activate);\r\n                    dialogScene.getChildByName(\"Center\")?.addChild(itemDialog);\r\n                    this._dialogManager.OpenDialog(dialogScene);\r\n                    \r\n                    resolve(itemDialog)\r\n                });\r\n            })\r\n            .catch((err) => reject(err));\r\n        })\r\n    }\r\n}\r\n"]}