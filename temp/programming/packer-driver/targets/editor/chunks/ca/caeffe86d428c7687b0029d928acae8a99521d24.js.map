{"version":3,"sources":["file:///F:/git/TestMatch3/assets/Scripts/Scene/StartScene/StartSceneComponent.ts"],"names":["_decorator","Button","Component","director","EditBox","LocationType","AppRoot","GameFactory","DialogFactory","AnsverDialogComponent","ccclass","property","StartSceneComponent","_sceneManager","dialogFactory","onEnable","getInstance","ResolveSceneManager","continueBtn","interactable","ResovleSaveState","ResolveSaveContext","IsGameFinished","HasGame","LoadGame","GetCurrentSaveState","gameState","undefined","leaderboardBtn","gameStats","onContinueClick","Transfer","GameScene","onNewGameClick","CreateDialog","then","dialog","getComponent","SetHandler","isAccept","name","getComponentInChildren","string","CreateGame","onLeaderBoardClick","ScoreScene","onExitClick","end"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,O,OAAAA,O;;AACzCC,MAAAA,Y,iBAAAA,Y;;AAEAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,qB,iBAAAA,qB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;qCAGjBY,mB,WADZF,OAAO,CAAC,qBAAD,C,UAGHC,QAAQ,CAACV,MAAD,C,UAGRU,QAAQ,CAACV,MAAD,C,2BANb,MACaW,mBADb,SACyCV,SADzC,CACmD;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQvCW,aARuC;AAAA,eASvCC,aATuC,GASvB;AAAA;AAAA,8CAAkB,8BAAlB,CATuB;AAAA;;AAWrCC,QAAAA,QAAQ,GAAS;AACvB,eAAKF,aAAL,GAAqB;AAAA;AAAA,kCAAQG,WAAR,CAAoBC,mBAApB,EAArB;AACA,eAAKC,WAAL,CAAiBC,YAAjB,GAAgC,CAAC;AAAA;AAAA,kCAAQH,WAAR,CAAoBI,gBAApB,GAAuCC,kBAAvC,GAA4DC,cAA5D,EAAjC;;AACA,cAAI;AAAA;AAAA,kCAAQN,WAAR,CAAoBI,gBAApB,GAAuCC,kBAAvC,GAA4DE,OAA5D,EAAJ,EAA2E;AACvE;AAAA;AAAA,4CAAgB;AAAA;AAAA,oCAAQP,WAAR,CAAoBI,gBAApB,EAAhB,EAAwDI,QAAxD;AACH;;AACD,cAAI;AAAA;AAAA,kCAAQR,WAAR,CAAoBI,gBAApB,GAAuCC,kBAAvC,GAA4DI,mBAA5D,GAAkFC,SAAlF,IAA+FC,SAAnG,EAA8G;AAAA;;AAC1G,iBAAKC,cAAL,CAAoBT,YAApB,GAAmC;AAAA;AAAA,oCAAQH,WAAR,CAAoBI,gBAApB,GAAuCC,kBAAvC,GAA4DI,mBAA5D,GAAkFC,SAAlF,2CAA6FG,SAA7F,KAA0GF,SAA7I;AACH;AACJ;;AAEDG,QAAAA,eAAe,GAAG;AACd,eAAKjB,aAAL,CAAmBkB,QAAnB,CAA4B;AAAA;AAAA,4CAAaC,SAAzC;AACH;;AAEDC,QAAAA,cAAc,GAAG;AACb,eAAKnB,aAAL,CAAmBoB,YAAnB,GAAkCC,IAAlC,CAAwCC,MAAD,IAAY;AAC/CA,YAAAA,MAAM,CAACC,YAAP;AAAA;AAAA,gEAA4CC,UAA5C,CAAwDC,QAAD,IAAsB;AACzE,kBAAIA,QAAJ,EAAc;AACV,oBAAIC,IAAI,GAAGJ,MAAM,CAACK,sBAAP,CAA8BrC,OAA9B,EAAwCsC,MAAnD;AACA;AAAA;AAAA,gDAAgB;AAAA;AAAA,wCAAQ1B,WAAR,CAAoBI,gBAApB,EAAhB,EAAwDuB,UAAxD,CAAmEH,IAAnE;;AACA,qBAAK3B,aAAL,CAAmBkB,QAAnB,CAA4B;AAAA;AAAA,kDAAaC,SAAzC;AACH;AACJ,aAND;AAOH,WARD;AASH;;AAEDY,QAAAA,kBAAkB,GAAG;AACjB,eAAK/B,aAAL,CAAmBkB,QAAnB,CAA4B;AAAA;AAAA,4CAAac,UAAzC;AACH;;AAEDC,QAAAA,WAAW,GAAG;AACV3C,UAAAA,QAAQ,CAAC4C,GAAT;AACH;;AA5C8C,O","sourcesContent":["import { _decorator, Button, Component, director, EditBox } from 'cc';\r\nimport { LocationType } from '../../Enums/LocationType';\r\nimport { ISceneManager } from '../ISceneManager';\r\nimport { AppRoot } from '../../Application/AppRoot';\r\nimport { GameFactory } from '../../Session/GameFactory';\r\nimport { DialogFactory } from '../../Dialog/DialogFactory';\r\nimport { AnsverDialogComponent } from '../../Dialog/AnsverDialogComponent';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('StartSceneComponent')\r\nexport class StartSceneComponent extends Component {\r\n\r\n    @property(Button)\r\n    private continueBtn!:Button\r\n\r\n    @property(Button)\r\n    private leaderboardBtn!:Button\r\n\r\n    private _sceneManager!:ISceneManager\r\n    private dialogFactory = new DialogFactory(\"Prefabs/Dialog/NewGameDialog\")\r\n    \r\n    protected onEnable(): void {\r\n        this._sceneManager = AppRoot.getInstance.ResolveSceneManager()\r\n        this.continueBtn.interactable = !AppRoot.getInstance.ResovleSaveState().ResolveSaveContext().IsGameFinished()\r\n        if (AppRoot.getInstance.ResovleSaveState().ResolveSaveContext().HasGame()) {\r\n            new GameFactory(AppRoot.getInstance.ResovleSaveState()).LoadGame()\r\n        }\r\n        if (AppRoot.getInstance.ResovleSaveState().ResolveSaveContext().GetCurrentSaveState().gameState != undefined) {\r\n            this.leaderboardBtn.interactable = AppRoot.getInstance.ResovleSaveState().ResolveSaveContext().GetCurrentSaveState().gameState?.gameStats != undefined\r\n        }\r\n    }\r\n\r\n    onContinueClick() {\r\n        this._sceneManager.Transfer(LocationType.GameScene)\r\n    }\r\n\r\n    onNewGameClick() {\r\n        this.dialogFactory.CreateDialog().then((dialog) => {\r\n            dialog.getComponent(AnsverDialogComponent)!.SetHandler((isAccept:boolean) => {\r\n                if (isAccept) { \r\n                    let name = dialog.getComponentInChildren(EditBox)!.string\r\n                    new GameFactory(AppRoot.getInstance.ResovleSaveState()).CreateGame(name)\r\n                    this._sceneManager.Transfer(LocationType.GameScene)\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    onLeaderBoardClick() {\r\n        this._sceneManager.Transfer(LocationType.ScoreScene);\r\n    }\r\n\r\n    onExitClick() {\r\n        director.end();\r\n    }\r\n}\r\n\r\n\r\n"]}