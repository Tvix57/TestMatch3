{"version":3,"sources":["file:///F:/git/TestMatch3/assets/Scripts/GameManagerComponent.ts"],"names":["_decorator","Component","director","sys","ScenePoolManagerComponent","LocationType","AppRoot","Platform","AudioManagerComponent","OfflineTimer","DialogManagerComponent","ccclass","uniquelyReferenced","GameManagerComponent","_scene","_soundManager","_dialog","onLoad","addPersistRootNode","node","scene","getComponent","timer","getInstance","Init","getOS","AddLocation","LoadingScene","StartScene","GameScene","ScoreScene","isBrowser","Web","isMobile","os","OS","IOS","Ios","ANDROID","Android","Editor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,G,OAAAA,G;;AAEjCC,MAAAA,yB,iBAAAA,yB;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,qB,iBAAAA,qB;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,sB,iBAAAA,sB;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAkCZ,U;;sCAI3Ba,oB,WAFZF,OAAO,CAAC,sBAAD,C,gBACPC,kB,UADD,MAEaC,oBAFb,SAE0CZ,SAF1C,CAGA;AAAA;AAAA;AAAA,eACYa,MADZ;AAAA,eAEYC,aAFZ;AAAA,eAGYC,OAHZ;AAAA;;AAKcC,QAAAA,MAAM,GAAS;AACrBf,UAAAA,QAAQ,CAACgB,kBAAT,CAA4B,KAAKC,IAAjC;AAEA,cAAIC,KAAK,GAAG,KAAKC,YAAL;AAAA;AAAA,qEAAZ;AACA,eAAKL,OAAL,GAAe,KAAKK,YAAL;AAAA;AAAA,+DAAf;AACA,eAAKP,MAAL,GAAcM,KAAd;AACA,eAAKL,aAAL,GAAqB,KAAKM,YAAL;AAAA;AAAA,6DAArB;AACA,gBAAMC,KAAK,GAAG,KAAKH,IAAL,CAAUE,YAAV;AAAA;AAAA,2CAAd;AAEA;AAAA;AAAA,kCAAQE,WAAR,CAAoBC,IAApB,CACI,KAAKC,KAAL,EADJ,EAEI,KAAKX,MAFT,EAGI,KAAKC,aAHT,EAIIO,KAJJ,EAKI,KAAKN,OALT;AAOA;AAAA;AAAA,kCAAQO,WAAR,CAAoBN,MAApB;AAEAG,UAAAA,KAAK,CAACM,WAAN,CAAkB;AAAA;AAAA,4CAAaC,YAA/B,EAAmD,sBAAnD,EAAqF,CAArF;AACAP,UAAAA,KAAK,CAACM,WAAN,CAAkB;AAAA;AAAA,4CAAaE,UAA/B,EAAmD,oBAAnD,EAAqF,CAArF;AACAR,UAAAA,KAAK,CAACM,WAAN,CAAkB;AAAA;AAAA,4CAAaG,SAA/B,EAAmD,6BAAnD,EAAqF,CAArF;AACAT,UAAAA,KAAK,CAACM,WAAN,CAAkB;AAAA;AAAA,4CAAaI,UAA/B,EAAmD,+BAAnD,EAAqF,CAArF;AACH;;AAEOL,QAAAA,KAAK,GAAc;AACvB,cAAItB,GAAG,CAAC4B,SAAR,EAAmB;AACf,mBAAO;AAAA;AAAA,sCAASC,GAAhB;AACH,WAFD,MAEO,IAAI7B,GAAG,CAAC8B,QAAR,EAAkB;AACrB,gBAAI9B,GAAG,CAAC+B,EAAJ,KAAW/B,GAAG,CAACgC,EAAJ,CAAOC,GAAtB,EAA2B;AACvB,qBAAO;AAAA;AAAA,wCAASC,GAAhB;AACH,aAFD,MAEO,IAAIlC,GAAG,CAAC+B,EAAJ,KAAW/B,GAAG,CAACgC,EAAJ,CAAOG,OAAtB,EAA+B;AAClC,qBAAO;AAAA;AAAA,wCAASC,OAAhB;AACH,aAFM,MAEA;AACH,qBAAO;AAAA;AAAA,wCAASC,MAAhB;AACH;AACJ,WARM,MAQA;AACH,mBAAO;AAAA;AAAA,sCAASA,MAAhB;AACH;AACJ;;AA3CL,O","sourcesContent":["import { _decorator, Component, director, sys } from 'cc';\r\nimport { ISceneManager } from './Scene/ISceneManager';\r\nimport { ScenePoolManagerComponent } from './Scene/ScenePoolManagerComponent';\r\nimport { LocationType } from './Enums/LocationType';\r\nimport { AppRoot } from './Application/AppRoot';\r\nimport { Platform } from './Enums/ApplicationConfig';\r\nimport { AudioManagerComponent } from './Scene/AudioManagerComponent';\r\nimport { OfflineTimer } from './Application/Timers';\r\nimport { DialogManagerComponent } from './Dialog/DialogManagerComponent';\r\n\r\nconst { ccclass, uniquelyReferenced } = _decorator;\r\n\r\n@ccclass('GameManagerComponent')\r\n@uniquelyReferenced\r\nexport class GameManagerComponent extends Component \r\n{   \r\n    private _scene!:ISceneManager\r\n    private _soundManager!:AudioManagerComponent\r\n    private _dialog!:DialogManagerComponent\r\n\r\n    protected onLoad(): void {\r\n        director.addPersistRootNode(this.node);\r\n          \r\n        let scene = this.getComponent(ScenePoolManagerComponent)!;\r\n        this._dialog = this.getComponent(DialogManagerComponent)!;\r\n        this._scene = scene\r\n        this._soundManager = this.getComponent(AudioManagerComponent)!;\r\n        const timer = this.node.getComponent(OfflineTimer)!;\r\n\r\n        AppRoot.getInstance.Init(\r\n            this.getOS(),\r\n            this._scene,\r\n            this._soundManager,\r\n            timer,\r\n            this._dialog\r\n        )\r\n        AppRoot.getInstance.onLoad()\r\n\r\n        scene.AddLocation(LocationType.LoadingScene       ,\"Prefabs/LoadingScene\"           ,0 )\r\n        scene.AddLocation(LocationType.StartScene         ,\"Prefabs/StartScene\"             ,0 )\r\n        scene.AddLocation(LocationType.GameScene          ,\"Prefabs/GameScene/GameScene\"    ,1 )\r\n        scene.AddLocation(LocationType.ScoreScene         ,\"Prefabs/ScoreScene/ScoreScene\"  ,1 )\r\n    }\r\n\r\n    private getOS() : Platform {\r\n        if (sys.isBrowser) {\r\n            return Platform.Web\r\n        } else if (sys.isMobile) {\r\n            if (sys.os === sys.OS.IOS) {\r\n                return Platform.Ios\r\n            } else if (sys.os === sys.OS.ANDROID) {\r\n                return Platform.Android\r\n            } else {\r\n                return Platform.Editor\r\n            }\r\n        } else {\r\n            return Platform.Editor;\r\n        }\r\n    }\r\n}\r\n"]}