{"version":3,"sources":["file:///F:/git/TestMatch3/assets/Scripts/GameManagerComponent.ts"],"names":["_decorator","Component","director","sys","ScenePoolManagerComponent","LocationType","AppRoot","Platform","AudioManagerComponent","OfflineTimer","DialogManagerComponent","ccclass","uniquelyReferenced","GameManagerComponent","_scene","_soundManager","_dialog","onLoad","addPersistRootNode","node","scene","getComponent","timer","getInstance","Init","getOS","AddLocation","LoadingScene","StartScene","GameScene","ScoreScene","os","OS","IOS","Ios","ANDROID","Android","WINDOWS","Editor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,G,OAAAA,G;;AAEjCC,MAAAA,yB,iBAAAA,yB;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,qB,iBAAAA,qB;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,sB,iBAAAA,sB;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAkCZ,U;;sCAI3Ba,oB,WAFZF,OAAO,CAAC,sBAAD,C,gBACPC,kB,UADD,MAEaC,oBAFb,SAE0CZ,SAF1C,CAGA;AAAA;AAAA;AAAA,eACYa,MADZ;AAAA,eAEYC,aAFZ;AAAA,eAGYC,OAHZ;AAAA;;AAKcC,QAAAA,MAAM,GAAS;AACrBf,UAAAA,QAAQ,CAACgB,kBAAT,CAA4B,KAAKC,IAAjC;AAEA,cAAIC,KAAK,GAAG,KAAKC,YAAL;AAAA;AAAA,qEAAZ;AACA,eAAKL,OAAL,GAAe,KAAKK,YAAL;AAAA;AAAA,+DAAf;AACA,eAAKP,MAAL,GAAcM,KAAd;AACA,eAAKL,aAAL,GAAqB,KAAKM,YAAL;AAAA;AAAA,6DAArB;AACA,gBAAMC,KAAK,GAAG,KAAKH,IAAL,CAAUE,YAAV;AAAA;AAAA,2CAAd;AAEA;AAAA;AAAA,kCAAQE,WAAR,CAAoBC,IAApB,CACI,KAAKC,KAAL,EADJ,EAEI,KAAKX,MAFT,EAGI,KAAKC,aAHT,EAIIO,KAJJ,EAKI,KAAKN,OALT;AAOA;AAAA;AAAA,kCAAQO,WAAR,CAAoBN,MAApB;AAEAG,UAAAA,KAAK,CAACM,WAAN,CAAkB;AAAA;AAAA,4CAAaC,YAA/B,EAAmD,sBAAnD,EAA2E,CAA3E;AACAP,UAAAA,KAAK,CAACM,WAAN,CAAkB;AAAA;AAAA,4CAAaE,UAA/B,EAAmD,oBAAnD,EAA2E,CAA3E;AACAR,UAAAA,KAAK,CAACM,WAAN,CAAkB;AAAA;AAAA,4CAAaG,SAA/B,EAAmD,mBAAnD,EAA2E,CAA3E;AACAT,UAAAA,KAAK,CAACM,WAAN,CAAkB;AAAA;AAAA,4CAAaI,UAA/B,EAAmD,oBAAnD,EAA2E,CAA3E;AACH;;AAEOL,QAAAA,KAAK,GAAc;AACvB,kBAAQtB,GAAG,CAAC4B,EAAZ;AACI,iBAAK5B,GAAG,CAAC6B,EAAJ,CAAOC,GAAZ;AACI,qBAAO;AAAA;AAAA,wCAASC,GAAhB;;AACJ,iBAAK/B,GAAG,CAAC6B,EAAJ,CAAOG,OAAZ;AACI,qBAAO;AAAA;AAAA,wCAASC,OAAhB;;AACJ,iBAAKjC,GAAG,CAAC6B,EAAJ,CAAOK,OAAZ;AACI,qBAAO;AAAA;AAAA,wCAASC,MAAhB;;AACJ;AACI,qBAAO;AAAA;AAAA,wCAASA,MAAhB;AARR;AAUH;;AAxCL,O","sourcesContent":["import { _decorator, Component, director, sys } from 'cc';\r\nimport { ISceneManager } from './Scene/ISceneManager';\r\nimport { ScenePoolManagerComponent } from './Scene/ScenePoolManagerComponent';\r\nimport { LocationType } from './Enums/LocationType';\r\nimport { AppRoot } from './Application/AppRoot';\r\nimport { Platform } from './Enums/ApplicationConfig';\r\nimport { AudioManagerComponent } from './Scene/AudioManagerComponent';\r\nimport { OfflineTimer } from './Application/Timers';\r\nimport { DialogManagerComponent } from './Dialog/DialogManagerComponent';\r\n\r\nconst { ccclass, uniquelyReferenced } = _decorator;\r\n\r\n@ccclass('GameManagerComponent')\r\n@uniquelyReferenced\r\nexport class GameManagerComponent extends Component \r\n{   \r\n    private _scene!:ISceneManager\r\n    private _soundManager!:AudioManagerComponent\r\n    private _dialog!:DialogManagerComponent\r\n\r\n    protected onLoad(): void {\r\n        director.addPersistRootNode(this.node);\r\n          \r\n        let scene = this.getComponent(ScenePoolManagerComponent)!;\r\n        this._dialog = this.getComponent(DialogManagerComponent)!;\r\n        this._scene = scene\r\n        this._soundManager = this.getComponent(AudioManagerComponent)!;\r\n        const timer = this.node.getComponent(OfflineTimer)!;\r\n\r\n        AppRoot.getInstance.Init(\r\n            this.getOS(),\r\n            this._scene,\r\n            this._soundManager,\r\n            timer,\r\n            this._dialog\r\n        )\r\n        AppRoot.getInstance.onLoad()\r\n\r\n        scene.AddLocation(LocationType.LoadingScene       ,\"Prefabs/LoadingScene\" ,0 )\r\n        scene.AddLocation(LocationType.StartScene         ,\"Prefabs/StartScene\"   ,0 )\r\n        scene.AddLocation(LocationType.GameScene          ,\"Prefabs/GameScene\"    ,1 )\r\n        scene.AddLocation(LocationType.ScoreScene         ,\"Prefabs/ScoreScene\"   ,2 )\r\n    }\r\n\r\n    private getOS() : Platform {\r\n        switch (sys.os) {\r\n            case sys.OS.IOS:\r\n                return Platform.Ios;\r\n            case sys.OS.ANDROID:\r\n                return Platform.Android;\r\n            case sys.OS.WINDOWS:\r\n                return Platform.Editor;\r\n            default:\r\n                return Platform.Editor;\r\n        }\r\n    }\r\n}\r\n"]}