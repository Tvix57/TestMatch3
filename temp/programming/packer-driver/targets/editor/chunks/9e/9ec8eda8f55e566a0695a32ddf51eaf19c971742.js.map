{"version":3,"sources":["file:///F:/git/TestMatch3/assets/Scripts/Application/AppRoot.ts"],"names":["AppRoot","Library","GameContext","AppAudio","AppDevice","constructor","_gameContext","_library","_scene","_soundManager","_sound","_device","_saveState","_platform","_settingsFile","_namesFile","getInstance","instance","Init","platform","scene","soundManager","settings","names","onLoad","ResolveSaveContext","GetCurrentSaveState","GetNames","GetCurrentLang","lang","ResolveGameContext","ResolveLibrary","ResolveSceneManager","ResolveSound","ResolveDevice","ResovleSaveState"],"mappings":";;;yEAYaA,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAVJC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;yBAOIJ,O,GAAN,MAAMA,OAAN,CACP;AAeYK,QAAAA,WAAW,GAAG;AAAA,eAddC,YAcc;AAAA,eAbdC,QAac;AAAA,eAZdC,MAYc;AAAA,eAXdC,aAWc;AAAA,eATdC,MASc;AAAA,eARdC,OAQc;AAAA,eAPdC,UAOc;AAAA,eALdC,SAKc;AAAA,eAJdC,aAIc;AAAA,eAHdC,UAGc;AAAE;;AACK,mBAAXC,WAAW,GAAY;AACrC,cAAI,KAAKC,QAAL,IAAiB,IAArB,EAA2B;AACvB,iBAAKA,QAAL,GAAgB,IAAIjB,OAAJ,EAAhB;AACH;;AACD,iBAAO,KAAKiB,QAAZ;AACH;;AAEDC,QAAAA,IAAI,CAACC,QAAD,EACCC,KADD,EAECC,YAFD,EAGCC,QAHD,EAICC,KAJD,EAKH;AACG,eAAKV,SAAL,GAAiBM,QAAjB;AACA,eAAKX,MAAL,GAAcY,KAAd;AACA,eAAKX,aAAL,GAAqBY,YAArB;AACA,eAAKP,aAAL,GAAqBQ,QAArB;AACA,eAAKP,UAAL,GAAkBQ,KAAlB;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACL,eAAKb,OAAL,GAAe;AAAA;AAAA,sCAAc,KAAKE,SAAnB,CAAf,CADK,CAEL;;AACA,eAAKN,QAAL,GAAgB;AAAA;AAAA,kCAAY,KAAKO,aAAjB,CAAhB;AAGA,eAAKJ,MAAL,GAAc;AAAA;AAAA,oCAAa,KAAKD,aAAlB,EAAgC,KAAKG,UAAL,CAAgBa,kBAAhB,GAAqCC,mBAArC,GAA2DJ,QAA3F,CAAd;AAEA,eAAKhB,YAAL,GAAoB;AAAA;AAAA,0CAChB,KAAKE,MADW,EAEhB,KAAKG,OAFW,CAApB;AAIH;;AAEDgB,QAAAA,QAAQ,GAAG;AAAE,iBAAO,KAAKZ,UAAZ;AAAwB;;AACrCa,QAAAA,cAAc,GAAE;AAAE,iBAAO,KAAKhB,UAAL,CAAgBa,kBAAhB,GAAqCC,mBAArC,GAA2DJ,QAA3D,CAAoEO,IAA3E;AAAiF;;AAEnGC,QAAAA,kBAAkB,GAAG;AAAE,iBAAO,KAAKxB,YAAZ;AAA0B;;AACjDyB,QAAAA,cAAc,GAAG;AAAE,iBAAO,KAAKxB,QAAZ;AAAsB;;AACzCyB,QAAAA,mBAAmB,GAAiB;AAAE,iBAAO,KAAKxB,MAAZ;AAAoB;;AAC1DyB,QAAAA,YAAY,GAAG;AAAE,iBAAO,KAAKvB,MAAZ;AAAoB;;AACrCwB,QAAAA,aAAa,GAAG;AAAE,iBAAO,KAAKvB,OAAZ;AAAqB;;AACvCwB,QAAAA,gBAAgB,GAAG;AAAE,iBAAO,KAAKvB,UAAZ;AAAwB;;AA1DjD,O;;AADaZ,MAAAA,O,CAeMiB,Q","sourcesContent":["\r\nimport { NameConfig, SettingsConfig } from '../Settings/SettingsConfig';\r\nimport { Library } from '../Settings/Library';\r\nimport { GameContext } from '../Session/GameContext';\r\nimport { AppAudio } from './AppAudio';\r\nimport { AppDevice } from './AppDevice';\r\nimport { AppState } from './AppState';\r\nimport { Platform } from './ApplicationConfig';\r\nimport { ISceneManager } from '../Scene/ISceneManager';\r\nimport { IAudioManager } from './ApplicationInterfaces';\r\n\r\n\r\nexport class AppRoot \r\n{\r\n    private _gameContext!:GameContext\r\n    private _library!:Library\r\n    private _scene!:ISceneManager\r\n    private _soundManager!:IAudioManager\r\n\r\n    private _sound!:AppAudio\r\n    private _device!:AppDevice\r\n    private _saveState!:AppState\r\n\r\n    private _platform!:Platform\r\n    private _settingsFile!:SettingsConfig\r\n    private _namesFile!:NameConfig\r\n\r\n    private static instance: AppRoot;\r\n    private constructor() {}\r\n    public static get getInstance(): AppRoot {\r\n        if (this.instance == null) {\r\n            this.instance = new AppRoot();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    Init(platform:Platform,\r\n         scene:ISceneManager,\r\n         soundManager:IAudioManager,\r\n         settings:SettingsConfig,\r\n         names:NameConfig\r\n    ){\r\n        this._platform = platform\r\n        this._scene = scene\r\n        this._soundManager = soundManager\r\n        this._settingsFile = settings\r\n        this._namesFile = names\r\n    }\r\n\r\n    onLoad() {\r\n        this._device = new AppDevice(this._platform)\r\n        // this._saveState = new AppState( this._platform, this._timer, this._device.GetPreferredLanguage(this._localizationComponent.GetArrayOfLangs()) )\r\n        this._library = new Library(this._settingsFile);\r\n\r\n                                                                       \r\n        this._sound = new AppAudio(this._soundManager,this._saveState.ResolveSaveContext().GetCurrentSaveState().settings)!;\r\n        \r\n        this._gameContext = new GameContext(\r\n            this._scene,\r\n            this._device,\r\n        );\r\n    }\r\n\r\n    GetNames() { return this._namesFile }\r\n    GetCurrentLang(){ return this._saveState.ResolveSaveContext().GetCurrentSaveState().settings.lang }\r\n    \r\n    ResolveGameContext() { return this._gameContext }\r\n    ResolveLibrary() { return this._library }\r\n    ResolveSceneManager():ISceneManager { return this._scene }\r\n    ResolveSound() { return this._sound }\r\n    ResolveDevice() { return this._device }\r\n    ResovleSaveState() { return this._saveState }\r\n}\r\n\r\n"]}